<div class="container">
  <div class="container-show mt-5">
    <%= render 'carrousel' %>
    <div class="row mt-5">
      <!-- Colonne gauche : Infos du logement -->
      <div class="col-md-7">
        <div class="card p-4 mb-4">
          <h1 class="mb-3"><%= @flat.name %></h1>
          <p><strong>Adresse :</strong> <%= @flat.address %></p>
          <p><strong>Prix :</strong> <%= @flat.price %> € / nuit</p>
          <p><strong>Description :</strong> <%= @flat.description %></p>
        </div>
      </div>

      <!-- Colonne droite : Formulaire de réservation -->
      <div class="col-md-5">
        <div class="card p-4" data-controller="price">
          <h4 class="mb-3">Réserver</h4>
          <%= form_with url: flat_bookings_path(@flat), method: :post, local: true do |f| %>
            <div class="mb-3">
              <%= f.label :start_date, "Date d'arrivée", class: "form-label" %>
              <%= f.date_field :start_date,
                  class: "form-control",
                  data: {
                    price_target: "startDate",
                    action: "input->price#updatePrice"
                  },
                  value: params.dig(:booking, :start_date) || "" %>
            </div>
            <div class="mb-3">
              <%= f.label :end_date, "Date de départ", class: "form-label" %>
              <%= f.date_field :end_date,
                  class: "form-control",
                  data: {
                    price_target: "endDate",
                    action: "input->price#updatePrice"
                  },
                  value: params.dig(:booking, :end_date) || "" %>
            </div>
            <div class="mb-3">
              <p><strong>Prix total :</strong>
                <span
                  data-price-target="priceDisplay"
                  data-price="<%= @flat.price %>">
                  <%= @flat.price %>
                </span> €
              </p>
            </div>
            <%= f.hidden_field :flat_id, value: @flat.id %>
            <%= f.submit "Réserver", class: "btn btn-primary w-100" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
